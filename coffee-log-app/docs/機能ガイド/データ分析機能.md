# データ分析機能ガイド

## 概要

LOGCUP（Coffee Log App）のデータ分析機能は、記録したコーヒー体験を様々な角度から分析し、新しい発見や傾向を見つけることができる機能です。

## アクセス方法

- **URL**: `/analytics`
- **ナビゲーション**: ヘッダーメニューの「📊 分析」をクリック

## 主な機能

### 1. 統計サマリー

記録したコーヒーデータの基本統計を4つのカードで表示：

- **総記録数**: これまでに記録したコーヒーの総数
- **平均評価**: 全記録の評価平均値
- **お気に入り店舗**: 最も多く利用している店舗
- **主要原産国**: 最も多く飲んでいる原産国

### 2. 時系列分析

**機能**: コーヒー消費量と評価の推移を時系列で表示
**チャート種類**: 複合線グラフ
**表示内容**:
- 左軸: 日別のコーヒー消費量（杯数）
- 右軸: 日別の平均評価（1-5段階）

### 3. ショップ別分析

**機能**: よく利用する店舗TOP10の分析
**チャート種類**: 複合バーチャート
**表示内容**:
- 各店舗の利用回数
- 各店舗での平均評価
- ツールチップで「お気に入り抽出方法」を表示

### 4. 原産地別分析

**機能**: コーヒー豆の原産国による消費傾向
**チャート種類**: ドーナツチャート
**表示内容**:
- 各原産国の消費割合
- 各原産国の消費杯数と平均評価

### 5. 抽出方法別分析

**機能**: 好みの抽出方法の傾向分析
**チャート種類**: バーチャート
**表示内容**:
- 各抽出方法の消費回数
- 各抽出方法の平均評価
- 抽出方法は日本語表示（ドリップ、エスプレッソ、フレンチプレス等）

### 6. 味覚プロファイル分析

**機能**: 7つの評価項目の平均値による好みの可視化
**チャート種類**: レーダーチャート
**表示項目**:
- 酸味、フレーバー、ボディ、バランス、総合評価、アロマ、アフターテイスト
- 各項目1-5段階の平均値

## フィルタリング機能

### 期間選択
**クイック選択**:
- 過去1週間
- 過去1ヶ月  
- 過去3ヶ月
- 過去1年
- 全期間

**カスタム期間**:
- 開始日・終了日を自由に設定
- 日付入力フィールドによる詳細指定

### 詳細フィルター
「詳細フィルター」を展開すると以下の条件で絞り込み可能：
- **ショップ名**: 部分一致検索
- **原産国**: 部分一致検索  
- **抽出方法**: プルダウン選択

### フィルター管理
- **自動保存**: フィルター設定はブラウザに自動保存
- **リセット機能**: ワンクリックで全フィルターをクリア
- **適用状況表示**: アクティブなフィルターをタグで表示
- **結果統計**: フィルター適用後の件数表示

## データエクスポート

### CSV出力機能
- **ファイル名**: `coffee-analytics-YYYY-MM-DD.csv`
- **出力内容**:
  - 基本統計（総記録数、平均評価、お気に入り店舗等）
  - 味覚プロファイル（7項目の平均値）
- **利用シーン**: データの外部保存、他ツールでの分析

## 使用シーン

### 1. 好みの発見
- 味覚プロファイルで自分の好みの傾向を把握
- 原産国・抽出方法分析で新しい選択肢を検討

### 2. 店舗選択の参考
- ショップ別分析で満足度の高い店舗を確認
- 評価推移で品質の安定性をチェック

### 3. 消費パターンの把握
- 時系列分析でコーヒー消費の季節変動を確認
- 期間フィルターで特定時期の傾向を分析

### 4. 記録の振り返り
- 統計サマリーで全体的な記録状況を確認
- フィルターを使って特定期間や条件での変化を分析

## 注意事項

- **最小データ要件**: 分析には最低1件以上のコーヒー記録が必要
- **フィルター結果**: 条件に合致する記録がない場合は適切なメッセージを表示
- **パフォーマンス**: 大量データでも快適に動作するよう最適化済み
- **プライバシー**: 全データはユーザーのアカウントに紐付けられ、他ユーザーからは見えません

## 技術仕様

- **チャートライブラリ**: Chart.js
- **レスポンシブ対応**: モバイル・タブレット・デスクトップ全対応
- **ダークモード**: テーマ切り替えに連動したチャート色彩変更
- **データ更新**: リアルタイムでコーヒー記録の追加・変更に連動 