# インフラ図

## 全体インフラストラクチャ

Coffee Log Appは、以下の主要インフラストラクチャ上に構築されています。

```
┌──────────────────────────────────┐         ┌──────────────────────────────────┐
│                                  │         │                                  │
│           Vercel                 │         │            Supabase              │
│                                  │         │                                  │
│  ┌────────────┐   ┌────────────┐ │         │  ┌────────────┐   ┌────────────┐ │
│  │            │   │            │ │         │  │            │   │            │ │
│  │   Edge     │   │ Serverless │ │         │  │ PostgreSQL │   │   Auth     │ │
│  │   Network  │   │ Functions  │ │         │  │ Database   │   │  Service   │ │
│  │            │   │            │ │         │  │            │   │            │ │
│  └────────────┘   └────────────┘ │         │  └────────────┘   └────────────┘ │
│                                  │         │                                  │
│  ┌────────────┐   ┌────────────┐ │         │  ┌────────────┐   ┌────────────┐ │
│  │            │   │            │ │         │  │            │   │            │ │
│  │   CDN      │   │   CI/CD    │ │         │  │  Storage   │   │   Edge     │ │
│  │            │   │ Pipeline   │ │         │  │  Service   │   │  Functions │ │
│  │            │   │            │ │         │  │            │   │            │ │
│  └────────────┘   └────────────┘ │         │  └────────────┘   └────────────┘ │
│                                  │         │                                  │
└──────────────────────────────────┘         └──────────────────────────────────┘
           │                                              │
           │                                              │
           ▼                                              ▼
┌──────────────────────────────────┐         ┌──────────────────────────────────┐
│                                  │         │                                  │
│          クライアント               │         │          開発環境                │
│                                  │         │                                  │
│  ┌────────────┐   ┌────────────┐ │         │  ┌────────────┐   ┌────────────┐ │
│  │            │   │            │ │         │  │            │   │            │ │
│  │  ブラウザ    │   │   PWA     │ │         │  │   VS Code  │   │   Git      │ │
│  │            │   │            │ │         │  │            │   │ Repository │ │
│  │            │   │            │ │         │  │            │   │            │ │
│  └────────────┘   └────────────┘ │         │  └────────────┘   └────────────┘ │
│                                  │         │                                  │
└──────────────────────────────────┘         └──────────────────────────────────┘
```

## デプロイインフラストラクチャ

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                                 Vercel Platform                               │
│                                                                              │
│  ┌────────────────────┐       ┌─────────────────┐      ┌───────────────────┐ │
│  │                    │       │                 │      │                   │ │
│  │    Build Phase     │──────►│  Deploy Phase   │─────►│   Runtime Phase   │ │
│  │                    │       │                 │      │                   │ │
│  └────────────────────┘       └─────────────────┘      └───────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                                                                        │  │
│  │                             Edge Network                               │  │
│  │                                                                        │  │
│  │  ┌────────────────┐       ┌─────────────────┐      ┌───────────────┐   │  │
│  │  │                │       │                 │      │               │   │  │
│  │  │   North America│       │     Europe      │      │    Asia       │   │  │
│  │  │                │       │                 │      │               │   │  │
│  │  └────────────────┘       └─────────────────┘      └───────────────┘   │  │
│  │                                                                        │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

## Supabaseインフラ構成

```
┌────────────────────────────────────────────────────────────────────────────┐
│                                Supabase                                    │
│                                                                            │
│  ┌──────────────────┐    ┌────────────────────┐    ┌───────────────────┐  │
│  │                  │    │                    │    │                   │  │
│  │    PostgreSQL    │    │    Auth Service    │    │  Storage Service  │  │
│  │                  │    │                    │    │                   │  │
│  └──────────────────┘    └────────────────────┘    └───────────────────┘  │
│           │                       │                         │             │
│           │                       │                         │             │
│           ▼                       ▼                         ▼             │
│  ┌──────────────────┐    ┌────────────────────┐    ┌───────────────────┐  │
│  │                  │    │                    │    │                   │  │
│  │    PostgREST     │    │     GoTrue         │    │     Storage       │  │
│  │    (REST API)    │    │   (Auth API)       │    │      API          │  │
│  │                  │    │                    │    │                   │  │
│  └──────────────────┘    └────────────────────┘    └───────────────────┘  │
│           │                       │                         │             │
│           └───────────────────────┼─────────────────────────┘             │
│                                   │                                       │
│                                   ▼                                       │
│  ┌────────────────────────────────────────────────────────────────────┐   │
│  │                                                                    │   │
│  │                           API Gateway                              │   │
│  │                                                                    │   │
│  └────────────────────────────────────────────────────────────────────┘   │
│                                   │                                       │
└───────────────────────────────────┼───────────────────────────────────────┘
                                    │
                                    ▼
                          ┌──────────────────┐
                          │                  │
                          │   Coffee Log     │
                          │     App          │
                          │                  │
                          └──────────────────┘
```

## インフラストラクチャの特徴

### Vercel
- サーバーレスプラットフォーム
- グローバルエッジネットワーク
- 自動CI/CDパイプライン
- プレビュー環境の自動生成
- HTTPS対応

### Supabase
- PostgreSQLデータベース
- Auth機能（JWT認証）
- ストレージサービス（画像保存）
- リアルタイムサブスクリプション
- RLS（Row Level Security）によるデータ保護

### クライアント
- ブラウザ互換性対応
- PWA対応（予定）
- レスポンシブデザイン
- オフラインキャッシュ

### 開発環境
- Git/GitHubによるバージョン管理
- TypeScriptによる型安全性
- Tailwind CSSによるスタイリング
- Next.jsフレームワーク 